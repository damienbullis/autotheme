# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

AutoTheme is a TypeScript rewrite of a Go-based CSS theme generator. It generates color palettes using color theory (harmonies) and outputs CSS variables, Tailwind v4 themes, and HTML previews. The project functions as both a CLI tool and an importable Node/Bun module.

## Tech Stack

- **Runtime:** Bun
- **Language:** TypeScript (strict mode)
- **Testing:** Vitest
- **Linting:** oxlint
- **Formatting:** oxfmt

## Commands

```bash
# Development
bun run dev                 # Watch mode for CLI
bun run dev:web             # Dev server for web app

# Building
bun run build               # Build library + schema
bun run build:cli           # Build CLI for npm
bun run build:binary        # Build standalone binaries (all platforms)
bun run build:web           # Build web app

# Testing
bun run test                # Run tests in watch mode
bun run test:run            # Run tests once
bun run test:coverage       # Run tests with coverage
bun run test:run tests/core/  # Run specific test directory

# Code Quality
bun run lint                # Run oxlint
bun run lint:fix            # Fix linting issues
bun run format              # Format with oxfmt
bun run format:check        # Check formatting
bun run typecheck           # TypeScript type checking
bun run check               # Run all checks (typecheck + lint + format + test)
```

## Architecture

```
src/
├── core/           # Pure color logic (Color class, conversions, contrast, harmonies)
├── generators/     # Output generators (CSS, Tailwind, HTML preview, dark mode script)
├── config/         # JSON config loading, validation, schema
├── cli/            # CLI entry point, argument parsing, interactive prompts
├── web/            # Documentation website & interactive previewer
└── index.ts        # Main export for module usage
```

### Core Module (`src/core/`)

- `color.ts` - Color class with HSL internal representation
- `conversions.ts` - Hex/RGB/HSL conversions
- `contrast.ts` - WCAG luminance and contrast calculations
- `harmonies.ts` - 10 harmony types (analogous, triadic, complementary, etc.)
- `variations.ts` - Tints (lighter), shades (darker), tones (desaturated)
- `palette.ts` - Full palette generation with accessible text colors

### Key Concepts

- **Harmonies:** Generated by rotating hue on HSL color wheel (e.g., triadic = 120° apart)
- **Tints/Shades/Tones:** 5 tints (50-400), 5 shades (600-950), 4 tones (tone-1 to tone-4) per color
- **Accessible Text:** Each color gets a foreground color meeting WCAG AAA (7:1 contrast ratio)
- **CSS Output:** Uses OKLCH color format (`oklch(0.65 0.15 250)`) for perceptual uniformity

## Configuration

AutoTheme uses JSON configuration only (no YAML). Config files: `autotheme.json`, `.autothemerc.json`, `.autothemerc`

Priority: CLI flags > config file > defaults

## Dependencies

- **Runtime deps:** `cac` (CLI parsing), `prompts` (interactive prompts)
- **Core color math:** Implemented from scratch (zero dependencies)

## CSS Variable Naming (Tailwind v4 Compatible)

Uses Tailwind v4 variable namespaces with OKLCH color format:

### Color Scale (per harmony color)

```
--color-primary-50       # Lightest tint (OKLCH)
--color-primary-100
--color-primary-200
--color-primary-300
--color-primary-400
--color-primary-500      # Base color
--color-primary-600
--color-primary-700
--color-primary-800
--color-primary-900
--color-primary-950      # Darkest shade
--color-primary-foreground  # Accessible text color
--color-primary-contrast    # High contrast text
--color-primary-tone-1..4   # Desaturated variations
```

### Harmony Colors (semantic names)

```
--color-primary-*        # First harmony color
--color-secondary-*      # Second harmony color
--color-tertiary-*       # Third harmony color
--color-quaternary-*     # Fourth harmony color (if applicable)
```

### Other Namespaces

```
--text-xs..4xl           # Typography scale
--spacing-1..10          # Spacing scale
--gradient-direction     # Gradient direction
--gradient-linear-*      # Linear gradients to harmony colors
--background-image-noise # Noise texture SVG
```

### Shadcn UI Compatible Variables

Also includes full Shadcn UI semantic variables (`--background`, `--foreground`, `--primary`, etc.) in OKLCH format.
